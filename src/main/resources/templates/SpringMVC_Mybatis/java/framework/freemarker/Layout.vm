package ${basePackage}.framework.freemarker;

import freemarker.template.TemplateModelException;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

import javax.servlet.http.HttpServletRequest;

/**
 * 布局帮助类
 *
 * @author wangbing
 * @version 0.0.1
 * @since 2017-01-01
 */
public class Layout {

    private String screenPrefix  = "/screen/";
    private String controlPrefix  = "/control/";
    private String suffix  = ".ftl";

    private String defaultScreen  = "index";

    public String setScreen() throws TemplateModelException {

        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();

        String contextPath = request.getContextPath();
        String servletPath = request.getServletPath();

        if (servletPath.startsWith("/") && !servletPath.equals("/")) {
            String substring = servletPath.substring(1, servletPath.length());
            return screenPrefix + substring + suffix;
        } else {
            return screenPrefix + defaultScreen + suffix;
        }
    }

    public String setControl(String control) {
        return controlPrefix + control + suffix;
    }
}
