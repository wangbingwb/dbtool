package ${basePackage}.framework.freemarker;

import freemarker.template.TemplateModelException;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

import javax.servlet.http.HttpServletRequest;

/**
 * 布局帮助类
 *
 * @author wangbing
 * @version 0.0.1
 * @Time 2017-01-01
 */
public class Layout {

    public String setScreen() throws TemplateModelException {

        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();

        String contextPath = request.getContextPath();
        String servletPath = request.getServletPath();

        if (servletPath.startsWith("/") && !servletPath.equals("/")) {
            String substring = servletPath.substring(1, servletPath.length());
            return "/screen/" + substring + ".ftl";
        } else {
            return "/screen/index.ftl";
        }
    }

    public String setControl(String control) throws TemplateModelException {
        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();

        String contextPath = request.getContextPath();
        String servletPath = request.getServletPath();
        if (control.startsWith("/")) {
            return "/control" + control + ".ftl";
        } else {
            return "/control/" + control + ".ftl";
        }
    }
}
